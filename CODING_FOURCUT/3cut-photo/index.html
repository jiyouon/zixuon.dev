<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>4CUT PHOTO</title>
    <link rel="stylesheet" href="style.css" />
    <meta name="theme-color" content="#E5D5D5" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  </head>

  <body>
    <!-- 앱 상태별 화면 -->

    <!-- 1. 시작 화면 -->
    <div id="start-screen" class="screen active">
      <div class="start-container">
        <div class="overlay">
          <!--<h1>인생네컷</h1>-->
          <button id="start-btn" class="primary-btn">촬영 시작</button>
        </div>
      </div>
    </div>

    <!-- 2. 카운트다운 화면 -->
    <div id="countdown-screen" class="screen">
      <div class="camera-container">
        <video id="camera-preview-countdown" autoplay muted></video>
        <div class="countdown-overlay">
          <div id="countdown-number">10</div>
          <div class="countdown-message">
            <p>잠시 후 촬영이 시작됩니다</p>
            <p>카메라를 보고 준비하세요!</p>
          </div>
        </div>
      </div>
    </div>

    <!-- 3. 촬영 중 화면 -->
    <div id="shooting-screen" class="screen">
      <div class="camera-container">
        <video id="camera-preview-shooting" autoplay muted></video>
        <div class="shooting-overlay">
          <div class="progress-info">
            <div id="shot-counter">1 / 8</div>
            <div id="next-shot-countdown">10</div>
            <p>다음 촬영까지</p>
          </div>
          <div class="flash-effect" id="flash"></div>
        </div>
      </div>
    </div>

    <!-- 4. 사진 선택 화면 -->
    <div id="selection-screen" class="screen">
      <div class="selection-container">
        <!-- 왼쪽: 4컷 레이아웃 실시간 미리보기 -->
        <div class="threecut-layout">
          <h2>인생네컷</h2>
          <div class="preview-container">
            <canvas id="preview-canvas" width="400" height="533"></canvas>
          </div>
          <div class="selection-info">
            <p id="selection-count">0 / 4 선택됨</p>
            <button id="confirm-btn" class="ok-btn" disabled>확인</button>
          </div>
        </div>

        <!-- 오른쪽: 8장 촬영 사진 -->
        <div class="photo-gallery">
          <h3>촬영된 사진을 선택하세요</h3>
          <div class="gallery-grid" id="photo-grid">
            <!-- 8장의 사진이 여기에 동적으로 추가됩니다 -->
          </div>
          <button id="retake-btn" class="secondary-btn">다시 촬영</button>
        </div>
      </div>
    </div>

    <!-- 5. 완료 화면 -->
    <div id="result-screen" class="screen">
      <div class="result-container">
        <h2>완성!</h2>
        <div class="final-threecut">
          <canvas id="final-canvas"></canvas>
        </div>
        <div class="result-actions">
          <p id="save-message">사진이 저장되었습니다!</p>
          <button id="restart-btn" class="remake-btn">다시 만들기</button>
        </div>
      </div>
    </div>

    <!-- 로딩/처리 중 오버레이 -->
    <div id="loading-overlay" class="overlay-screen">
      <div class="loading-content">
        <div class="spinner"></div>
        <p id="loading-message">처리 중...</p>
      </div>
    </div>
  </body>

  <script src="renderer.js"></script>
</html>
